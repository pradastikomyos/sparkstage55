{
  "audit": "auth_services",
  "auth_context": {
    "status": "MISMATCH",
    "key_differences": [
      "Spark studio includes init-time timeout protection and explicit timeout sign-out handling; sparkstage55 does not.",
      "Spark studio suppresses expected admin-check RLS errors; sparkstage55 lacks that nuance."
    ]
  },
  "session_management": {
    "status": "MISMATCH",
    "key_differences": [
      "Spark studio uses AuthGate to block rendering until auth initialized; sparkstage55 does not.",
      "Spark studio has additional proactive refresh logic on visibility/idle; sparkstage55 does not."
    ]
  },
  "utilities": {
    "supabase_client": {
      "status": "MATCH"
    },
    "auth_ts": {
      "status": "MATCH"
    },
    "session_validation": {
      "status": "MISMATCH",
      "issue": "Import strategy differs (path alias @/lib/supabase vs relative ../lib/supabase)."
    },
    "session_error_handler": {
      "status": "MISMATCH",
      "issue": "sparkstage55 missing structured error logging utilities present in Spark studio."
    },
    "booking_state_manager": {
      "status": "MISMATCH",
      "issue": "sparkstage55 removes logging/warnings; behavior mostly equivalent but not byte-identical."
    }
  },
  "hooks": {
    "use_session_refresh": {
      "status": "MISMATCH",
      "issue": "sparkstage55 uses Zustand-based auth/session duplication; Spark studio drives refresh off AuthContext session."
    },
    "zustand_use_auth": {
      "status": "EXTRA_IN_TARGET",
      "issue": "sparkstage55 introduces a separate persisted auth store; Spark studio uses AuthContext as source of truth."
    }
  },
  "routing_guards": {
    "status": "MISMATCH",
    "missing_in_target": [
      "ProtectedRoute component",
      "AuthGate gating in App routing"
    ]
  },
  "required_sync_actions": [
    "Sync sparkstage55 auth flow to Spark studio (AuthContext/AuthGate/ProtectedRoute patterns).",
    "Remove or fully align Zustand auth store with Supabase session (prefer Spark studio approach for exact match).",
    "Sync PaymentPage session validation and 401 recovery behavior to Spark studio.",
    "Align import strategy and structured session error handling utilities to Spark studio.",
    "Ensure byte-identical copies for audited auth/service files."
  ],
  "status": "MISMATCH"
}
